<aura:component implements="c:TTI_Constants">
    <aura:attribute name="Service_Request_Case" type="Case"/>
    <aura:attribute name="userType" type="Object" />
    <aura:attribute name="ServiceMilestoneAttribute" type="Object" />
    <aura:attribute name="Manager" type="Boolean" />
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:method name="GoodWillConstructor" action="{!c.doInit}"/>
    
    <fieldset class="slds-m-top_medium">
        <aura:if isTrue="{!if((v.userType.Account.RecordType.Name == 'Service Agent' &amp;&amp; v.userType.Account.Internal_Service_Agent__c &amp;&amp; v.Manager)||(v.userType.Account.RecordType.Name == 'Service Agent' &amp;&amp; v.userType.Account.Internal_Service_Agent__c),true,false)}">   
            <legend class="slds-form-element__label slds-text-heading_medium slds-m-top_medium 
                       slds-m-bottom_medium" 
                onclick="{!c.toggleSection}"
                style="background:#f9f9fa;cursor:pointer;width:100%">
            <div class="slds-float--left ">
                <lightning:icon aura:id="section" iconName="utility:chevronright" size="x-small" alternativeText="Indicates add"/>
                <lightning:icon class="slds-hide" aura:id="section" iconName="utility:chevrondown" size="x-small" alternativeText="Indicates dash"/>
            </div>
            <span class="slds-m-left_medium">
                <b><u>Good Will</u></b>
            </span>
        </legend>
            <div aura:id="section" class="slds-hide slds-form-element__group">
                <aura:if isTrue="{!if((v.userType.Account.RecordType.Name == 'Service Agent' &amp;&amp; v.userType.Account.Internal_Service_Agent__c  &amp;&amp; v.Manager)||(v.userType.Account.RecordType.Name == 'Service Agent' &amp;&amp; v.userType.Account.Internal_Service_Agent__c),true,false)}">
                    
                    <div class="slds-form-element__row">
                        <div class="slds-form-element slds-size_1-of-2">
                            <label class="slds-form-element__label" for="input-01">Good Will</label>
                            <ui:inputCheckbox disabled="{!if(v.ServiceMilestoneAttribute.New 
                                                        ||
                                                        v.ServiceMilestoneAttribute.AwaitingApproval ||
                                                        (v.userType.Account.RecordType.Name == 'Service Agent' 
                                                        &amp;&amp; 
                                                        v.userType.Account.Internal_Service_Agent__c 
                                                        &amp;&amp; 
                                                        v.ServiceMilestoneAttribute.InProgress) ,false,true)}" 
                                              aura:id="goodwillcheckbox"
                                              value="{!v.Service_Request_Case.Goodwill__c}" change="{!c.changeGoodWill}"/>
                        </div>
                    </div>
                </aura:if>
                
                
                <aura:if isTrue="{!if(v.userType.Account.RecordType.Name == 'Service Agent' &amp;&amp; v.userType.Account.Internal_Service_Agent__c ,true,false)}">  
                    <div class="slds-form-element__row">
                        <div class="slds-form-element slds-size_1-of-2">
                            <label class="slds-form-element__label" for="input-01">Goodwill Parts Only</label>
                            <ui:inputCheckbox disabled="{!if(v.ServiceMilestoneAttribute.New 
                                                        ||
                                                        v.ServiceMilestoneAttribute.AwaitingApproval ||
                                                        (v.userType.Account.RecordType.Name == 'Service Agent' 
                                                        &amp;&amp; 
                                                        v.userType.Account.Internal_Service_Agent__c 
                                                        &amp;&amp; 
                                                        v.ServiceMilestoneAttribute.InProgress) ,false,true)}" 
                                              aura:id="goodwillpartsonlycheckbox"
                                              value="{!v.Service_Request_Case.Goodwill_parts_only__c}" change="{!c.changeGoodWillParts}"/>
                        </div>
                    </div>
                </aura:if> 
                <aura:if isTrue="{!if(v.Service_Request_Case.Claim_Type__c =='Non-Warranty' 
                                 &amp;&amp;
                                 v.userType.Account.RecordType.Name == 'Service Agent' 
                                 &amp;&amp;
                                 v.userType.Account.Internal_Service_Agent__c
                                 &amp;&amp; 
                                 v.Manager,true,false)}">
                    <div class="slds-form-element__row">
                        <div class="slds-form-element slds-size_1-of-2">
                            <label class="slds-form-element__label" for="input-01">Parts % Discount</label>
                            <ui:inputNumber disabled="{!if(v.ServiceMilestoneAttribute.New 
                                                      ||
                                                      v.ServiceMilestoneAttribute.AwaitingApproval ||
                                                      (v.userType.Account.RecordType.Name == 'Service Agent' 
                                                      &amp;&amp; 
                                                      v.userType.Account.Internal_Service_Agent__c 
                                                      &amp;&amp; 
                                                      v.ServiceMilestoneAttribute.InProgress) ,false,true)}" 
                                            aura:id="partsdiscount"
                                            value="{!v.Service_Request_Case.Parts_Percentage_Discount__c}"
                                            blur="{!c.partsdiscountblur}"/>
                        </div>
                    </div>
                </aura:if>
                <aura:if isTrue="{!if(v.Service_Request_Case.Claim_Type__c =='Non-Warranty' 
                                 &amp;&amp;
                                 v.userType.Account.RecordType.Name == 'Service Agent' 
                                 &amp;&amp;
                                 v.userType.Account.Internal_Service_Agent__c
                                 &amp;&amp; 
                                 v.Manager,true,false)}">
                    <div class="slds-form-element__row">
                        <div class="slds-form-element slds-size_1-of-2">
                            <label class="slds-form-element__label" for="input-01">Labour % Discount</label>
                            <ui:inputNumber disabled="{!if(v.ServiceMilestoneAttribute.New 
                                                      ||
                                                      v.ServiceMilestoneAttribute.AwaitingApproval ||
                                                      (v.userType.Account.RecordType.Name == 'Service Agent' 
                                                      &amp;&amp; 
                                                      v.userType.Account.Internal_Service_Agent__c 
                                                      &amp;&amp; 
                                                      v.ServiceMilestoneAttribute.InProgress) ,false,true)}"
                                            aura:id="retaildiscount"
                                            value="{!v.Service_Request_Case.Labour_Percentage_Discount__c}"
                                            blur="{!c.retaildiscountblur}"/>
                        </div>
                    </div>
                </aura:if>   
                <aura:if isTrue="{!if(v.Service_Request_Case.Claim_Type__c =='Non-Warranty' 
                                 &amp;&amp;
                                 v.userType.Account.RecordType.Name == 'Service Agent' 
                                 &amp;&amp;
                                 v.userType.Account.Internal_Service_Agent__c
                                 &amp;&amp; 
                                 v.Manager,true,false)}">
                    <div class="slds-form-element__row">
                        <div class="slds-form-element slds-size_1-of-2">
                            <label class="slds-form-element__label" for="input-01">Total Value of Quote:</label>
                            <ui:inputNumber disabled="true"
                                            aura:id="totalvalueofquote"
                                            value="{!v.Service_Request_Case.TTI_Total_Service_line_item_value_inc_GS__c}"/>
                        </div>
                    </div>
                </aura:if>
            </div>
        </aura:if>
    </fieldset>
    
</aura:component>